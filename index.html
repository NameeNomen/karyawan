<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ergonomic Circuit Form Concept</title>
    <style>
        /* --- CSS STYLES: TEMA SIRKUIT --- */

        :root {
            --bg-pcb: #0a0a0a;
            --trace-inactive: #1a3a5a; /* Biru tua pudar */
            --trace-active: #00d2ff;   /* Biru neon cerah */
            --trace-hot: #ffcc00;      /* Emas saat siap */
            --node-bg: rgba(10, 25, 40, 0.9);
            --input-bg: rgba(0, 10, 20, 0.8);
        }

        body, html {
            margin: 0; padding: 0; height: 100%;
            font-family: 'Consolas', 'Courier New', monospace; /* Font lebih teknis */
            background-color: var(--bg-pcb);
            color: #fff;
            display: flex; justify-content: center; align-items: center;
            /* Latar belakang pola sirkuit subtle */
            background-image: 
                linear-gradient(rgba(0, 20, 40, 0.8) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 20, 40, 0.8) 1px, transparent 1px);
            background-size: 30px 30px, 30px 30px;
            background-position: -1px -1px, -1px -1px;
        }

        /* Wadah Utama yang Lebih Kompak */
        .circuit-board {
            position: relative;
            width: 800px; /* Ukuran lebih kecil agar ergonomis */
            height: 600px;
            border: 2px solid var(--trace-inactive);
            box-shadow: 0 0 50px rgba(0, 0, 0, 0.9), inset 0 0 20px var(--trace-inactive);
            border-radius: 10px;
            overflow: hidden;
            background: radial-gradient(circle at center, #0f1f30 0%, #050a10 80%);
        }

        .hints {
            position: absolute; bottom: 15px; width: 100%;
            text-align: center; color: var(--trace-active);
            font-size: 0.8rem; opacity: 0.7;
        }

        /* --- LAYER SVG UNTUK JEJAK SIRKUIT --- */
        .circuit-traces {
            position: absolute; top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 0; pointer-events: none;
        }

        .trace-line {
            fill: none;
            stroke: var(--trace-inactive);
            stroke-width: 3px;
            stroke-linecap: square; /* Ujung garis kotak */
            stroke-linejoin: miter; /* Sudut tajam */
            transition: all 0.5s ease;
        }

        /* Titik Solder (Pad) */
        .trace-pad {
            fill: var(--trace-inactive);
            transition: all 0.5s ease;
        }

        /* Saat jalur aktif */
        .trace-line.is-active {
            stroke: var(--trace-active);
            stroke-width: 4px;
            filter: drop-shadow(0 0 8px var(--trace-active));
            /* Animasi aliran data */
            stroke-dasharray: 20;
            animation: dataFlow 0.5s linear infinite;
        }
        .trace-pad.is-active { fill: var(--trace-active); box-shadow: 0 0 10px var(--trace-active); }

        @keyframes dataFlow { to { stroke-dashoffset: -40; } }


        /* --- INTI PUSAT (CPU) --- */
        .core-container {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
        }

        .cpu-core {
            width: 120px; height: 120px;
            background: #000;
            border: 3px solid var(--trace-inactive);
            /* Bentuk seperti chip prosesor */
            clip-path: polygon(10% 0, 90% 0, 100% 10%, 100% 90%, 90% 100%, 10% 100%, 0 90%, 0 10%);
            color: var(--trace-inactive);
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            text-align: center; cursor: not-allowed;
            position: relative; z-index: 2;
            transition: all 0.5s ease;
            box-shadow: inset 0 0 20px rgba(0,0,0,1);
        }
        .cpu-text { font-size: 1rem; font-weight: bold;}
        .cpu-text small { display: block; font-size: 0.6rem; margin-top: 5px; opacity: 0.7; }

        /* Denyutan saat standby */
        .cpu-core:disabled .cpu-text { animation: blink 2s infinite; }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }

        /* SAAT CORE SIAP */
        .cpu-core.is-ready {
            border-color: var(--trace-hot);
            color: var(--trace-hot);
            box-shadow: 0 0 30px var(--trace-hot);
            cursor: pointer;
            background: rgba(255, 204, 0, 0.1);
        }
        .cpu-core.is-ready:hover {
             background: var(--trace-hot);
             color: #000;
        }


        /* --- NODE TOPIK (Komponen) --- */
        .cluster-container {
            position: absolute;
            z-index: 5;
            display: flex; justify-content: center; align-items: center;
            /* Transisi cepat untuk ergonomi */
            transition: all 0.3s ease-out; 
        }

        /* Node Utama */
        .topic-node {
            width: 100px; height: 60px;
            background: var(--node-bg);
            border: 2px solid var(--trace-inactive);
            /* Bentuk persegi panjang teknis dengan sudut terpotong */
            clip-path: polygon(10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%, 0 10px);
            color: var(--trace-active);
            display: flex; justify-content: center; align-items: center;
            font-size: 0.9rem; letter-spacing: 1px;
            cursor: pointer;
            position: relative;
        }

        .topic-node::before { /* Efek scanline */
            content: ''; position: absolute; top:0; left:0; width:100%; height:100%;
            background: linear-gradient(transparent 50%, rgba(0, 210, 255, 0.05) 50%);
            background-size: 100% 4px; pointer-events: none;
        }

        .topic-node:hover {
            border-color: var(--trace-active);
            box-shadow: 0 0 15px var(--trace-active);
        }

        .cluster-container.is-completed .topic-node {
            border-color: var(--trace-hot);
            color: var(--trace-hot);
            box-shadow: inset 0 0 10px var(--trace-hot);
        }
        .cluster-container.is-completed .topic-node::after { content: '[OK]'; position: absolute; bottom: -20px; font-size: 0.7rem; }


        /* --- INPUT YANG MEKAR (Lebih Dekat) --- */
        .blooming-inputs {
            position: absolute; top: 50%; left: 50%;
            width: 0; height: 0; pointer-events: none; opacity: 0;
            transition: all 0.3s ease; z-index: 1;
        }

        /* Saat Mekar */
        .cluster-container.is-bloomed { z-index: 20; }
        .cluster-container.is-bloomed .blooming-inputs {
            width: 300px; height: 250px; /* Area lebih kecil */
            opacity: 1; pointer-events: all;
            transform: translate(-50%, -50%);
        }
        
        /* Input muncul lebih dekat ke node induknya */
        .input-wrapper {
            position: absolute;
            transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
            transform: scale(0.5); opacity: 0;
        }

        .cluster-container.is-bloomed .input-wrapper.pos-top { top: -70px; left: 50%; transform: translate(-50%, 0) scale(1); opacity: 1; }
        .cluster-container.is-bloomed .input-wrapper.pos-bottom { bottom: -70px; left: 50%; transform: translate(-50%, 0) scale(1); opacity: 1; }
        .cluster-container.is-bloomed .input-wrapper.pos-left { left: -110px; top: 50%; transform: translate(0, -50%) scale(1); opacity: 1; }
        
        /* Styling Input */
        .circuit-input {
            background: var(--input-bg);
            border: 1px solid var(--trace-inactive);
            border-bottom: 3px solid var(--trace-inactive); /* Gaya terminal */
            padding: 8px 15px; color: var(--trace-active);
            font-family: inherit; outline: none; min-width: 160px; font-size: 0.9rem;
            transition: all 0.2s;
        }
        .circuit-input::placeholder { color: rgba(0, 210, 255, 0.4); }
        .circuit-input:focus { border-color: var(--trace-active); box-shadow: 0 4px 10px rgba(0, 210, 255, 0.2); }
        .circuit-input.is-filled { border-color: var(--trace-hot); color: var(--trace-hot); }

        /* Overlay Sukses */
        #success-overlay {
            position: absolute; top:0; left:0; width:100%; height:100%;
            background: #000; z-index: 1000; display: flex; justify-content: center; align-items: center;
            flex-direction: column; opacity: 0; pointer-events: none; transition: opacity 0.5s;
        }
        #success-overlay.show { opacity: 1; }
        .success-msg { color: var(--trace-active); font-size: 1.5rem; letter-spacing: 2px; margin-bottom: 10px;}

    </style>
</head>
<body>

<div class="circuit-board" id="board">

    <svg class="circuit-traces" xmlns="http://www.w3.org/2000/svg">
        <circle id="pad-identity" class="trace-pad" cx="280" cy="220" r="6" />
        <path id="trace-identity" class="trace-line" d="M 280 220 L 320 220 L 400 300" />

        <circle id="pad-contact" class="trace-pad" cx="520" cy="220" r="6" />
        <path id="trace-contact" class="trace-line" d="M 520 220 L 480 220 L 400 300" />

        <circle id="pad-pref" class="trace-pad" cx="400" cy="450" r="6" />
        <path id="trace-pref" class="trace-line" d="M 400 450 L 400 300" />
    </svg>

    <div class="core-container">
        <button id="cpu-core" class="cpu-core" disabled>
            <span class="cpu-text status-waiting">AWAITING<br>INPUT<small>System Idle</small></span>
            <span class="cpu-text status-ready" style="display: none;">EXECUTE<small>Upload Data</small></span>
        </button>
    </div>

    <div class="cluster-container" id="cluster-identity" data-trace="trace-identity" data-pad="pad-identity" style="top: 220px; left: 280px;">
        <div class="topic-node">SYS.ID</div>
        <div class="blooming-inputs">
            <div class="input-wrapper pos-top">
                <input type="text" class="circuit-input required-field" placeholder="> First Name">
            </div>
            <div class="input-wrapper pos-bottom">
                 <input type="text" class="circuit-input required-field" placeholder="> Last Name">
            </div>
        </div>
    </div>

    <div class="cluster-container" id="cluster-contact" data-trace="trace-contact" data-pad="pad-contact" style="top: 220px; left: 520px;">
        <div class="topic-node">COMM.LINK</div>
        <div class="blooming-inputs">
            <div class="input-wrapper pos-top">
                <input type="email" class="circuit-input required-field" placeholder="> Email Addr">
            </div>
        </div>
    </div>

    <div class="cluster-container" id="cluster-pref" data-trace="trace-pref" data-pad="pad-pref" style="top: 450px; left: 400px;">
        <div class="topic-node">CONFIG</div>
        <div class="blooming-inputs">
            <div class="input-wrapper pos-left">
                <select class="circuit-input required-field" style="cursor: pointer;">
                    <option value="" disabled selected>> Select Role</option>
                    <option value="dev">Engineer</option>
                    <option value="design">Architect</option>
                </select>
            </div>
        </div>
    </div>

    <div class="hints">// Initialize nodes to energize the CPU core.</div>

    <div id="success-overlay">
        <div class="success-msg">SYSTEM UPLOAD COMPLETE.</div>
        <div style="color: var(--trace-active);">Rebooting sequence initiated...</div>
    </div>
</div>


<script>
    document.addEventListener('DOMContentLoaded', () => {
        const clusters = document.querySelectorAll('.cluster-container');
        const cpuCoreBtn = document.getElementById('cpu-core');
        const statusWaiting = document.querySelector('.status-waiting');
        const statusReady = document.querySelector('.status-ready');
        const board = document.getElementById('board');
        const successOverlay = document.getElementById('success-overlay');

        const totalClusters = clusters.length;

        // 1. Handle Klik Node (Mekar/Kuncup)
        clusters.forEach(cluster => {
            const topicNode = cluster.querySelector('.topic-node');
            topicNode.addEventListener('click', (e) => {
                // Tutup yang lain agar fokus dan rapi
                clusters.forEach(c => { if (c !== cluster) c.classList.remove('is-bloomed'); });
                cluster.classList.toggle('is-bloomed');
            });

            // Klik di luar untuk menutup
            document.addEventListener('click', (e) => {
                if (!cluster.contains(e.target) && cluster.classList.contains('is-bloomed')) {
                    cluster.classList.remove('is-bloomed');
                }
            });
        });

        // 2. Handle Input
        const allInputs = document.querySelectorAll('.circuit-input');
        allInputs.forEach(input => {
            const eventType = input.tagName === 'SELECT' ? 'change' : 'input';
            input.addEventListener(eventType, () => {
                // Visualisasi input terisi
                input.value.trim() !== '' ? input.classList.add('is-filled') : input.classList.remove('is-filled');
                // Cek kluster induknya
                checkClusterCompletion(input.closest('.cluster-container'));
            });
        });

        // 3. Logika Penyelesaian Kluster & Aktivasi Jejak Sirkuit
        function checkClusterCompletion(cluster) {
            const requiredInputs = cluster.querySelectorAll('.required-field');
            let allFilled = true;
            requiredInputs.forEach(reqInput => {
                if (reqInput.value.trim() === '') allFilled = false;
            });

            const traceId = cluster.getAttribute('data-trace');
            const padId = cluster.getAttribute('data-pad');
            const traceSvg = document.getElementById(traceId);
            const padSvg = document.getElementById(padId);

            if (allFilled && requiredInputs.length > 0) {
                if (!cluster.classList.contains('is-completed')) {
                    cluster.classList.add('is-completed');
                    // Aktifkan jejak sirkuit dan pad
                    traceSvg.classList.add('is-active');
                    padSvg.classList.add('is-active');
                    cluster.classList.remove('is-bloomed'); // Tutup otomatis
                }
            } else {
                 if (cluster.classList.contains('is-completed')) {
                    cluster.classList.remove('is-completed');
                    traceSvg.classList.remove('is-active');
                    padSvg.classList.remove('is-active');
                 }
            }
            checkGlobalState();
        }

        // 4. Cek Status CPU Global
        function checkGlobalState() {
            const completedClusters = document.querySelectorAll('.cluster-container.is-completed');
            if (completedClusters.length === totalClusters && totalClusters > 0) {
                activateCPU();
            } else {
                deactivateCPU();
            }
        }

        function activateCPU() {
            if (cpuCoreBtn.disabled) {
                cpuCoreBtn.disabled = false;
                cpuCoreBtn.classList.add('is-ready');
                statusWaiting.style.display = 'none';
                statusReady.style.display = 'block';
            }
        }

        function deactivateCPU() {
             if (!cpuCoreBtn.disabled) {
                cpuCoreBtn.disabled = true;
                cpuCoreBtn.classList.remove('is-ready');
                statusWaiting.style.display = 'block';
                statusReady.style.display = 'none';
             }
        }

        // 5. Eksekusi Akhir
        cpuCoreBtn.addEventListener('click', () => {
            if (!cpuCoreBtn.disabled) {
                // Efek "Power Down" pada board
                board.style.transform = 'scale(0.95)';
                board.style.filter = 'brightness(1.5) contrast(1.2)'; // Flash terang
                board.style.transition = 'all 0.3s cubic-bezier(0.7, 0, 0.3, 1)';

                setTimeout(() => {
                    board.style.filter = 'brightness(0)'; // Mati total
                    successOverlay.classList.add('show');
                }, 300);

                setTimeout(() => { window.location.reload(); }, 3500);
            }
        });
    });
</script>

</body>
</html>